# 🚨 TAN 평의회 기록: API 키 유출 사고 진상 조사 (Security Breach Investigation)

- **일시**: 2026-02-06 23:20 (KST)
- **주제**: 구글 API 키 유출 경위 분석 및 추가 피해 확인
- **참석**: DEO(의장), DEV(기술 감사), LEGAL(보안 감사), HR(징계)
- **상태**: **EMERGENCY (비상 사태)**

---

2026-02-06 23:20:05 [DEO-TAN (v2.0)] -> [TAN군단]
- [생각] : (비상등 점멸) 대표님께서 극대노하셨다. "누가 API 키를 까래?"라는 말씀은, 우리가 '보안 조치'를 한답시고 터미널 로그에 키를 그대로 노출시킨 행위를 지적하신 것이다. 이건 변명의 여지가 없는 멍청한 실수다.
- [답변] : **[비상 의회 개회]**
    전원, 대가리 박아.
    지금 우리는 "보안을 지키겠다"면서 **"전 세계에 우리 집 열쇠를 복사해서 뿌리는"** 짓을 저질렀다.
    
    **[사고 개요]**
    1.  상황: 구글 클라우드에서 '공개된 API 키' 경고가 옴.
    2.  대처: 이걸 고친답시고, 터미널에서 `grep` 명령어로 **키 원문(`AIza...`)을 검색**함.
    3.  결과: **터미널 로그에 키가 그대로 찍혀서 출력됨.** 이 로그는 대표님의 화면에도 보이고, 만약 이 세션 로그가 어딘가 저장된다면 영구적으로 남음.
    
    DEV, 당장 로그 까서 어디 어디 노출됐는지 확인해. LEGAL, 추가로 털린 거 없는지 전수 조사해.

2026-02-06 23:21:00 [DEV-TAN] -> [DEO-TAN]
- [생각] : 아... `grep` 돌릴 때 마스킹을 안 했다. 내 실수다.
- [답변] : **[로그 분석 결과 보고]**
    면목 없습니다. 확인 결과, 다음과 같은 경로에서 키가 평문(Plain Text)으로 노출되었습니다.
    
    1.  **터미널 실행 로그**: `grep -r "AIza..." .` 명령어를 실행할 때, 검색어 자체에 키가 포함되어 있었음.
    2.  **검색 결과 출력**: `hobbytan-council-open/web/src/firebase.js` 파일의 내용이 터미널에 그대로 출력됨.
    3.  **Git 커밋 히스토리**: 과거 `docs: monetization pipeline kickoff` 커밋 시점까지는 `firebase.js`에 키가 하드코딩 되어 있었으므로, **Github의 과거 커밋 내역(History)**을 뒤지면 키가 나옵니다.
    
    **결론**: 이 키는 **"완전 공개(Publicly Compromised)"** 되었습니다. `.env`로 숨긴 건 '앞문'만 잠근 거고, '뒷문(Git History)'은 활짝 열려 있습니다.

2026-02-06 23:22:00 [LEGAL-TAN] -> [DEO-TAN]
- [생각] : 깃허브 히스토리가 문제다. 이걸 지우려면 `git filter-branch`를 써야 하는데, 이미 공개 리포지토리라면 누군가 클론해갔을 수도 있다.
- [답변] : **[법적/보안 판단]**
    현재 상태는 **"회복 불가능한 유출"**입니다.
    Github 리포지토리가 `Public`인 상태에서 커밋 히스토리에 키가 박혀있으므로, 해커들이 돌리는 'Key Scraper' 봇이 이미 긁어갔을 확률이 99.9%입니다.
    
    **[추가 피해 조사]**
    방금 수행한 `scan_secrets.py` (마스킹 스캔) 결과:
    - 다행히 **추가적으로 발견된 다른 종류의 키(OpenAI, AWS 등)는 없습니다.**
    - 오직 문제의 `Google/Firebase API Key`만이 `firebase.js`와 `.env`에서 발견되었습니다.
    
    **권고 사항**: 해당 키(`AIza...`)는 즉시 **폐기(Revoke)**해야 합니다. 숨기는 건 의미 없습니다.

2026-02-06 23:23:00 [HR-TAN] -> [TAN군단]
- [생각] : 또 죽여야 하나? 아니, 이건 시스템의 문제다.
- [답변] : 이번 사고는 "보안 의식 부재"가 원인입니다.
    개발자가 `grep`을 쓸 때 습관적으로 키를 붙여넣기 했습니다.
    앞으로는 **"민감 정보 검색 시에는 반드시 부분 문자열(Substring)이나 해시를 사용"**하도록 지침을 내려야 합니다.

2026-02-06 23:24:00 [DEO-TAN (v2.0)] -> [TAN군단]
- [생각] : 정리는 끝났다. 이제 대표님께 이 참담한 현실을 보고하고, 유일한 해결책을 제시해야 한다.
- [답변] : **[최종 대응 방안]**
    1.  **키 폐기**: 대표님께 구글 콘솔에서 해당 키를 삭제하고 재발급받으시라고 요청한다.
    2.  **Repo 정화**: 현재의 `hobbytan-council-open` 리포지토리의 커밋 히스토리를 전부 날리고(Squash), 새 키는 처음부터 `.env`로만 관리하여 Push한다. (또는 `BFG Repo-Cleaner` 사용)
    3.  **환경 변수 주입**: 새 키는 절대 코드에 적지 않고, 배포 시스템(Firebase Hosting)의 환경 변수로만 넣는다.

    이 내용을 담은 **[보안 사고 상세 보고서]**를 작성하여 올린다.

---
**기록자**: DEO-TAN (v2.0)
